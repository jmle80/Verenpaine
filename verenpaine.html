<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Verenpaine P채iv채kirja</title>
  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="/verenpaine/manifest.json">
  <link rel="apple-touch-icon" href="/verenpaine/icon-192.png">
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script> <!-- OCR -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Graafit -->
  <base href="/verenpaine/">
  <style>
    body { margin: 0; padding: 0; font-family: sans-serif; background: #121212; color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
    #video { width: 100%; height: auto; max-height: 40vh; background: #000; }
    #canvas { display: none; }
    button { padding: 1.2rem 2rem; margin: 0.5rem; background: #6200ea; color: white; border: none; border-radius: 8px; font-size: 1.4rem; touch-action: manipulation; min-width: 44px; min-height: 44px; }
    #history { margin: 1rem; overflow-y: auto; flex: 1; }
    #chart-container { width: 100%; height: 300px; margin: 1rem 0; }
    select, textarea, input { padding: 0.8rem; margin: 0.5rem; background: #333; color: white; border: 1px solid #6200ea; border-radius: 8px; font-size: 1.2rem; width: calc(100% - 1rem); }
    #result { text-align: center; margin: 1rem; font-size: 1.5rem; }
    .controls { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; }
    .history-item { margin-bottom: 1rem; padding: 1rem; background: #1e1e1e; border-radius: 8px; }
    .notes { display: none; margin-top: 0.5rem; font-style: italic; color: #bbb; }
    .show-notes { display: block; }
    /* Modal for notes */
    #notesModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; flex-direction: column; z-index: 10; }
    #notesModal textarea { height: 150px; }
    @media (orientation: landscape) { #video { max-height: 100vh; } }
  </style>
</head>
<body>
  <h1 style="text-align: center; margin: 1rem; font-size: 2rem;">Verenpaine P채iv채kirja</h1>
  
  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>
  
  <div class="controls">
    <button onclick="startCamera()">Avaa Kamera &
