<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keto Ostoslista</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .version-tag {
            color: #d9534f; /* Punertava huomioväri */
            font-weight: bold;
            font-size: 0.9em;
            margin-bottom: 10px;
            display: block;
        }
        h1 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-top: 0;
        }
        .summary-box {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-left: 5px solid #27ae60;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .total-price {
            font-weight: bold;
            font-size: 1.2em;
        }
        .category-header {
            font-size: 1.1em;
            font-weight: bold;
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        .item-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .item-row {
            background: #fff;
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: background 0.2s;
            cursor: pointer;
        }
        .item-row:active {
            background-color: #eef;
        }
        .item-row input[type="checkbox"] {
            transform: scale(1.5);
            margin-right: 15px;
        }
        .item-details {
            flex-grow: 1;
        }
        .item-name {
            display: block;
            font-weight: 500;
        }
        .item-price {
            display: block;
            font-size: 0.85em;
            color: #777;
        }
        /* Kun tuote on valittu */
        .item-row.checked {
            background-color: #e8f5e9;
            opacity: 0.7;
        }
        .item-row.checked .item-name {
            text-decoration: line-through;
            color: #888;
        }
        .btn-reset {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #c0392b;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            margin-top: 30px;
            cursor: pointer;
        }
        .btn-reset:hover {
            background-color: #a93226;
        }
    </style>
</head>
<body>

    <span class="version-tag">Versio 1.0</span>

    <div class="summary-box">
        <div class="summary-row">
            <span>Ostoskorissa:</span>
            <span id="cart-total" style="color: #27ae60; font-weight:bold;">0.00 €</span>
        </div>
        <div class="summary-row">
            <span>Budjetti jäljellä (arvio 108€):</span>
            <span id="budget-left">108.00 €</span>
        </div>
    </div>

    <h1>Ketogeeninen viikko</h1>

    <div id="shopping-list-container">
        </div>

    <button class="btn-reset" onclick="resetList()">Tyhjennä koko lista</button>

<script>
    // Tuotedata
    const shoppingData = [
        { category: "Liha, Kala & Kana", items: [
            { name: "Naudan jauheliha 20% (800g)", price: 9.80 },
            { name: "Kirjolohifilee (n. 400g)", price: 7.60 },
            { name: "Broilerin koipireidet (1.1kg)", price: 3.60 },
            { name: "Broilerin filee/paisti (400g)", price: 5.50 },
            { name: "Seiti, pakaste (400g)", price: 3.35 },
            { name: "Pekoni (140g)", price: 2.00 },
            { name: "Katkaravut, pakaste (180g)", price: 4.50 },
            { name: "Tonnikala öljyssä", price: 1.60 }
        ]},
        { category: "Maitotuotteet & Munat", items: [
            { name: "Kananmunat (15kpl)", price: 3.60 },
            { name: "Voi (500g)", price: 3.85 },
            { name: "Kuohukerma (5dl)", price: 3.40 },
            { name: "Turkkilainen jogurtti (1kg)", price: 3.90 },
            { name: "Kermajuusto (1kg)", price: 6.00 },
            { name: "Feta/Salaattijuusto", price: 3.00 },
            { name: "Vuohenjuusto", price: 4.50 },
            { name: "Creme Fraiche (2prk)", price: 3.00 }
        ]},
        { category: "Hedelmät & Vihannekset", items: [
            { name: "Avokadot (pussi)", price: 4.70 },
            { name: "Salaattisekoitus (2pss)", price: 4.00 },
            { name: "Kurkku", price: 1.50 },
            { name: "Kukkakaali & Parsakaali", price: 5.00 },
            { name: "Vihreät pavut (pakaste)", price: 1.50 },
            { name: "Sienet", price: 2.50 },
            { name: "Pinaatti", price: 2.00 },
            { name: "Marjat (pakaste)", price: 3.00 },
            { name: "Sitruuna & Valkosipuli", price: 1.50 },
            { name: "Tomaattimurska/Salsa", price: 2.00 }
        ]},
        { category: "Kuivat & Muut", items: [
            { name: "Mantelijauho (200g)", price: 4.50 },
            { name: "Pähkinät", price: 4.00 },
            { name: "Tacomauste", price: 1.50 }
        ]}
    ];

    const estimatedTotal = 108.00;

    // Alustetaan sivu
    function init() {
        const container = document.getElementById('shopping-list-container');
        
        shoppingData.forEach((group, groupIndex) => {
            // Luo kategoriaotsikko
            const header = document.createElement('div');
            header.className = 'category-header';
            header.textContent = group.category;
            container.appendChild(header);

            // Luo lista
            const list = document.createElement('ul');
            list.className = 'item-list';

            group.items.forEach((item, itemIndex) => {
                const li = document.createElement('li');
                li.className = 'item-row';
                li.id = `row-${groupIndex}-${itemIndex}`;
                
                // Checkboxin ja tekstin kääre
                li.onclick = (e) => {
                    // Estetään tuplaklikkaus jos painetaan suoraan checkboxia
                    if (e.target.type !== 'checkbox') {
                        toggleCheck(groupIndex, itemIndex);
                    }
                };

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `cb-${groupIndex}-${itemIndex}`;
                checkbox.onchange = () => toggleCheck(groupIndex, itemIndex);

                const details = document.createElement('div');
                details.className = 'item-details';
                details.innerHTML = `
                    <span class="item-name">${item.name}</span>
                    <span class="item-price">n. ${item.price.toFixed(2)}
